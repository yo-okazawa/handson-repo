resource postgres {
  net {
    cram-hmac-alg sha1;
    shared-secret "<%= node["pgsql_cluster"]["secret"] %>";
  }
  volume 0 {
    device <%= node["pgsql_cluster"]["device"] %>;
    disk <%= node["pgsql_cluster"]["disk"] %>;
    meta-disk internal;
  }
  on <%= node["pgsql_cluster"]["primary"]["hostname"] %> {
    address <%= node["pgsql_cluster"]["primary"]["ip"] %>:<%= node["pgsql_cluster"]["port"] %>;
  }
  on <%= node["pgsql_cluster"]["secondary"]["hostname"] %> {
    address <%= node["pgsql_cluster"]["secondary"]["ip"] %>:<%= node["pgsql_cluster"]["port"] %>;
  }
}

